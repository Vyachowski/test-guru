<h1 class="mb-4"><%= t("admin.tests.index.header") %></h1>

<h2 class="mb-4"><%= t("admin.badges.index.header") %></h2>

<div class="row g-3">
  <% if @badges.any? %>
    <% @badges.each do |badge| %>
      <% status = @badge_status[badge] %>
      <% filter_style = 'filter: grayscale(100%); opacity: 0.5;' unless status[:earned] && status[:active] %>
      <% text_style = 'color: #6c757d;' unless status[:earned] && status[:active] %>

      <div class="col-6 col-md-4 col-lg-3">
        <div class="card text-center h-100 border-0">
          <% if badge.image_url.present? %>
            <div class="d-flex flex-wrap align-items-center justify-content-center mx-auto mt-3"
                 style="width: 80px; height: 80px; border-radius: 50%; overflow: hidden; border: 2px solid #dee2e6; <%= filter_style %>">
              <img src="<%= badge.image_url %>" alt="<%= badge.name %>" style="width: 70%; height: 70%; object-fit: cover;">
            </div>
          <% end %>
          <div class="card-body p-2">
            <h6 class="card-title mb-0" style="<%= text_style %>"><%= badge.name %></h6>
          </div>
        </div>
      </div>
    <% end %>
  <% else %>
    <div class="col-12 text-center text-muted">
      <%= t('badges.none_yet', default: "Нет бейджей в системе") %>
    </div>
  <% end %>
</div>


<table class="table">
  <thead>
    <tr>
      <th scope="col">
        <button class="btn btn-outline-dark sort-by-title pointer" type="button" id="test-table-sort">
          <%=t("common.tables.name_column") %>
          <%= octicon 'arrow-up', class: 'text-success hide' %>
          <%= octicon 'arrow-down', class: 'text-danger hide' %>
        </button>
      </th>
      <th scope="col"><%=t("common.tables.level_column") %></th>
      <th scope="col"><%=t("admin.tests.index.table.questions_quantity_column") %></th>
      <th scope="col"><%=t("common.tables.actions_column") %></th>
    </tr>
  </thead>

  <tbody id="user-tests-rows">
    <%= render @tests %>
  </tbody>
</table>

<% unless current_user.is_a?(Admin) %>
  <div class="container p-0 text-center">
    <%= link_to t('feedbacks.link'), new_feedback_path %>
  </div>
<% end %>
